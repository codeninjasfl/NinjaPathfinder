<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2563eb" />
  <title>Code Ninjas – Guided Parent Quiz</title>
  <meta name="description" content="A simple, pretty, one‑by‑one quiz that recommends JR, CREATE, Clubs, or Academies and shows key stats." />
  <style>
    :root{
      --bg1:#0ea5e9; /* sky blue */
      --bg2:#2563eb; /* royal blue */
      --card:#ffffff;
      --ink:#0f172a;  /* slate-900 */
      --muted:#64748b; /* slate-500 */
      --brand:#2563eb; /* Code Ninjas blue-ish */
      --accent:#22d3ee;
      --border:#e5e7eb;
      --radius:16px;
      --shadow:0 12px 30px rgba(2,6,23,.18), 0 2px 8px rgba(2,6,23,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:linear-gradient(180deg,var(--bg1),var(--bg2));font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans";color:var(--ink)}
    .wrap{min-height:100%;display:grid;place-items:start center;padding:20px}

    header{color:#eef6ff;text-align:center;margin-bottom:12px}
    header .brand{display:flex;align-items:center;justify-content:center;gap:10px}
    header img.logo{height:36px;width:auto;filter:drop-shadow(0 1px 0 rgba(0,0,0,.15))}
    header h1{margin:6px 0 0;font-size:clamp(22px,4vw,34px)}
    header p{margin:6px 0 0;color:#dbeafe}

    .card{width:min(860px,96vw);background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:22px} 
    .hidden{display:none !important} 
    .hidden{display:none !important}

    /* Stepper */
    .topbar{display:flex;align-items:center;gap:10px;margin:4px 0 14px}
    .progress{flex:1;height:12px;background:#eef2ff;border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--brand),var(--accent))}
    .count{font-weight:800;color:#334155;min-width:110px;text-align:right}

    /* Steps */
    .step{display:none;animation:fade .25s ease}
    .step.active{display:block}
    @keyframes fade{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:none}}
    @media (prefers-reduced-motion:reduce){.step{animation:none}}

    fieldset{border:0;margin:0;padding:0}
    legend{font-weight:900;margin:0 0 10px;font-size:18px}
    .hint{color:var(--muted);font-size:12px;margin:0 0 10px}

    .opts{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
    label.opt{display:flex;align-items:center;gap:12px;padding:16px;border:1px solid var(--border);border-radius:14px;cursor:pointer;user-select:none;line-height:1.25;min-height:56px;font-size:16px}
    label.opt:focus-within{outline:3px solid color-mix(in oklab,var(--brand) 65%, white)}
    input[type=radio],input[type=checkbox]{accent-color:var(--brand)}
    input[type=range]{width:100%}

    .actions{display:flex;gap:10px;justify-content:space-between;margin-top:14px}
    .actions.sticky{position:sticky;bottom:calc(env(safe-area-inset-bottom) + 8px);background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,.92));backdrop-filter:saturate(1.2) blur(4px);padding-top:6px;border-bottom-left-radius:var(--radius);border-bottom-right-radius:var(--radius)}
    .btn{appearance:none;border:1px solid var(--border);background:#f8fafc;border-radius:12px;padding:12px 16px;cursor:pointer;font-weight:900;min-height:48px}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
    .btn:focus-visible{outline:3px solid color-mix(in oklab,var(--brand) 65%, white)}
    .btn:disabled{opacity:.5;cursor:not-allowed}

    /* Results */
    #result{display:none}
    #recTitle{text-align:center;margin:0 0 4px}
    #recBlurb{text-align:center;color:#334155;margin:0 0 10px}
    #recPoints{margin:8px 0 0 18px}
    #stats{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:12px}
    .stat{border:1px solid var(--border);border-radius:12px;padding:14px;text-align:center}
    .stat h3{margin:0;font-size:24px}
    .stat p{margin:6px 0 0;color:#475569;font-size:13px}
    .center{text-align:center}

    @media (max-width:640px){
      .wrap{padding:14px}
      .card{padding:14px}
      #stats{grid-template-columns:1fr}
      .count{min-width:84px}
      .actions{flex-wrap:wrap}
      .actions .btn.primary{flex:1 0 100%}
      .actions .btn:not(.primary){flex:0 0 auto}
      .opts{grid-template-columns:1fr}
      header img.logo{height:30px}
    }
    header p.sub{margin-top:8px;color:#e2e8f0;font-weight:700}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <img class="logo" src="https://www.codeninjas.com/hubfs/Group%201.svg" alt="Code Ninjas logo" onerror="this.style.display='none'">
      </div>
      <h1>Find the right program for your Ninja!</h1>
    </header>

    <!-- Pre‑start: Director enters parent's first & last name -->
    <section class="card" id="prestart" aria-label="Director setup" autocomplete="off">
      <label class="hint" for="parentFullNameTop">Parent's first and last name</label>
      <div style="display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center">
        <input id="parentFullNameTop" placeholder="First and last name" autocomplete="off" autocapitalize="words" style="padding:12px;border:1px solid var(--border);border-radius:12px;font-size:16px" />
        <button class="btn primary" id="startQuizBtn" type="button" disabled>Start quiz ▶</button>
      </div>
    </section>

    <!-- WIZARD: One‑by‑one questions -->
    <section id="wizard" class="card hidden" aria-live="polite">
      <div class="topbar" aria-hidden="true">
        <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
        <div class="count"><span id="qnum">1</span>/<span id="qtotal">8</span></div>
      </div>

      <!-- Step 1 -->
      <div class="step active" data-step="1">
        <fieldset>
          <legend id="ageLegend">How old is your child?</legend>
          <div class="opts">
            <label class="opt"><input type="radio" name="age" value="5-7" required>5–7</label>
            <label class="opt"><input type="radio" name="age" value="8-10">8–10</label>
            <label class="opt"><input type="radio" name="age" value="11-14">11–14</label>
            <label class="opt"><input type="radio" name="age" value="15+">15+</label>
          </div>
        </fieldset>
      </div>

      <!-- Step 3 -->
      <div class="step" data-step="2">
        <fieldset>
          <legend>What is your child's prior experience with coding? <span class="hint">Scale: 1–5</span></legend>
          <div class="opts">
            <label class="opt"><input type="radio" name="experience" value="1" required> 1 — Brand new</label>
            <label class="opt"><input type="radio" name="experience" value="2"> 2</label>
            <label class="opt"><input type="radio" name="experience" value="3"> 3 — Some exposure</label>
            <label class="opt"><input type="radio" name="experience" value="4"> 4</label>
            <label class="opt"><input type="radio" name="experience" value="5"> 5 — Very experienced</label>
          </div>
        </fieldset>
      </div>

      <!-- Step 4 -->
      <div class="step" data-step="3">
        <fieldset>
          <legend>How comfortable is your child with technology? <span class="hint">Scale: 1–5</span></legend>
          <div class="opts">
            <label class="opt"><input type="radio" name="comfort" value="1" required> 1 — Still learning</label>
            <label class="opt"><input type="radio" name="comfort" value="2"> 2</label>
            <label class="opt"><input type="radio" name="comfort" value="3"> 3 — Pretty comfortable</label>
            <label class="opt"><input type="radio" name="comfort" value="4"> 4</label>
            <label class="opt"><input type="radio" name="comfort" value="5"> 5 — Very confident</label>
          </div>
        </fieldset>
      </div>

      <!-- Step 5 -->
      <div class="step" data-step="4" data-require-one="interests">
        <fieldset>
          <legend>Which activities interest your child the most? <span class="hint">Select all that apply</span></legend>
          <div class="opts">
            <label class="opt"><input type="checkbox" name="interests" value="GameDev">Building video games</label>
            <label class="opt"><input type="checkbox" name="interests" value="Roblox">Roblox</label>
            <label class="opt"><input type="checkbox" name="interests" value="Minecraft">Minecraft</label>
            <label class="opt"><input type="checkbox" name="interests" value="Robotics">Robotics</label>
            <label class="opt"><input type="checkbox" name="interests" value="YouTube">YouTube</label>
            <label class="opt"><input type="checkbox" name="interests" value="3D">3D design/printing</label>
            <label class="opt"><input type="checkbox" name="interests" value="AI">Artificial Intelligence</label>
          </div>
        </fieldset>
      </div>

      <!-- Step 6 -->
      <div class="step" data-step="5">
        <fieldset>
          <legend>When your child plays games, what do they enjoy most?</legend>
          <div class="opts">
            <label class="opt"><input type="radio" name="gameStyle" value="Explore" required>Exploring/building worlds</label>
            <label class="opt"><input type="radio" name="gameStyle" value="Puzzles">Solving puzzles</label>
            <label class="opt"><input type="radio" name="gameStyle" value="Create">Creating new things</label>
            <label class="opt"><input type="radio" name="gameStyle" value="Compete">Competing with friends</label>
          </div>
        </fieldset>
      </div>

      <!-- Step 7 -->
      <div class="step" data-step="6">
        <fieldset>
          <legend>How does your child learn best?</legend>
        <div class="opts">
            <label class="opt"><input type="radio" name="learn" value="Hands-on" required>Hands‑on activities</label>
            <label class="opt"><input type="radio" name="learn" value="Step-by-step">Step‑by‑step instructions</label>
            <label class="opt"><input type="radio" name="learn" value="Independent">Independent exploration</label>
            <label class="opt"><input type="radio" name="learn" value="Mentor">Working with a mentor</label>
          </div>
        </fieldset>
      </div>

      <!-- Step 8 -->
      <div class="step" data-step="7" data-require-one="hopes">
        <fieldset>
          <legend>What are you hoping your child will gain from Code Ninjas? <span class="hint">Select all that apply</span></legend>
          <div class="opts">
            <label class="opt"><input type="checkbox" name="hopes" value="Fun">Fun & confidence</label>
            <label class="opt"><input type="checkbox" name="hopes" value="NewSkills">New coding/tech skills</label>
            <label class="opt"><input type="checkbox" name="hopes" value="Academic">Academic enrichment</label>
            <label class="opt"><input type="checkbox" name="hopes" value="LongTerm">Long‑term STEM development</label>
          </div>
        </fieldset>
      </div>

      <!-- Step 9 -->
      <div class="step" data-step="8">
        <fieldset>
          <legend>Which format will your child enjoy more?</legend>
          <div class="opts">
            <label class="opt"><input type="radio" name="structure" value="Structured" required>Structured curriculum</label>
            <label class="opt"><input type="radio" name="structure" value="Clubs">Creative, club‑style</label>
            <label class="opt"><input type="radio" name="structure" value="Either">Either / mix</label>
          </div>
        </fieldset>
      </div>

      <div class="actions sticky">
        <button class="btn" id="backBtn" type="button">◀ Back</button>
        <button class="btn primary" id="nextBtn" type="button">Next ▶</button>
      </div>
    </section>

    <!-- RESULTS -->
    <section id="result" class="card" aria-live="polite">
      <h2 id="recTitle"></h2>
      <p id="recBlurb"></p>
      <ul id="recPoints"></ul>
      <hr>
      <h3 class="center" style="margin:0 0 8px">At‑a‑glance stats</h3>
      <div id="stats"></div>
      <div class="actions center" style="justify-content:center;margin-top:12px">
        <button class="btn" id="retake">Retake quiz</button>
        <button class="btn" id="print">Print/Save</button>
      </div>
      <p class="hint center" style="margin-top:10px">Stats are pulled from official Code Ninjas sources; program features can vary by location.</p>
    </section>
  </div>

  <script>
  (function(){
    // ---------- Utility ----------
    function $(sel,root){ return (root||document).querySelector(sel); }
    function $all(sel,root){ return Array.from((root||document).querySelectorAll(sel)); }

    // ---------- Wizard state ----------
    const steps = $all('.step');
    const total = steps.length; // questions only
    const bar = $('#bar');
    const qnum = $('#qnum');
    const qtotal = $('#qtotal');
    qtotal.textContent = total;
    const backBtn = $('#backBtn');
    const nextBtn = $('#nextBtn');
    const wizard = $('#wizard');
    const result = $('#result');

    let idx = 0; // current step index

    // ---------- Parent name gate (pre-start) ----------
    let _parentFirst = ''; let _parentLast = '';
    function getParentName(){ return [_parentFirst, _parentLast].filter(Boolean).join(' ').trim(); }
    function setParentFirst(name){ _parentFirst = String(name||'').trim(); }
    function setParentLast(name){ _parentLast = String(name||'').trim(); }

    const prestart = document.getElementById('prestart');
    const parentFullInput = document.getElementById('parentFullNameTop');
    const startBtn = document.getElementById('startQuizBtn');

    // --- First-name helpers ---
    function getFirstName(){ return _parentFirst; }

    function syncStartUI(){
      // Always show the name prompt first; clear any autofill and disable Start
      prestart.classList.remove('hidden');
      wizard.classList.add('hidden');
      if(parentFullInput){ parentFullInput.value=''; }
      if(startBtn){ startBtn.disabled = true; }
      if(parentFullInput){ parentFullInput.focus(); }
    }
    if(startBtn){
      const onInput = ()=>{
        const val = (parentFullInput?.value||'').trim();
        const tokens = val.split(/[ ,]+/).filter(Boolean);
        startBtn.disabled = tokens.length < 2; // need first + last
      };
      if(parentFullInput){ parentFullInput.addEventListener('input', onInput); }

      const triggerStart = ()=>{
        const full = (parentFullInput?.value||'').trim();
        const tokens = full.split(/[ ,]+/).filter(Boolean);
        const first = tokens[0] || '';
        const last = tokens.slice(1).join(' ') || '';
        if(!first || !last) return;
        setParentFirst(first); setParentLast(last);
        prestart.classList.add('hidden');
        wizard.classList.remove('hidden');
        idx = 0; updateUI();
      };
      startBtn.addEventListener('click', triggerStart);
      if(parentFullInput){ parentFullInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); triggerStart(); }}); }
    }
    // Start with name prompt visible
    syncStartUI();

    // ---------- UI updates & validation ----------
    function updateUI(){
      steps.forEach((s,i)=>s.classList.toggle('active', i===idx));
      qnum.textContent = idx+1;
      const pct = (idx/(total-1))*100; bar.style.width = pct + '%';
      backBtn.disabled = idx===0;

      // Personalize first step legend with parent's first name
      const ageLegendEl = document.getElementById('ageLegend');
      if(ageLegendEl){
        if(idx===0){
          const fn = getFirstName();
          ageLegendEl.textContent = fn ? `Hi ${fn}! Before we begin, how old is your child?` : `How old is your child?`;
        } else {
          ageLegendEl.textContent = `How old is your child?`;
        }
      }

      let disableNext = false;
      const active = steps[idx];

      // 1) Required radio groups
      const requiredRadio = active.querySelector('input[type=radio][required]');
      if(requiredRadio){
        const group = requiredRadio.name;
        const selected = wizard.querySelector(`input[name="${group}"]:checked`);
        disableNext = !selected;
      }

      // 2) Require at least 1 checkbox if flagged
      const requireOne = active.getAttribute('data-require-one');
      if(requireOne){
        const anyChecked = !!wizard.querySelector(`input[name="${requireOne}"]:checked`);
        disableNext = disableNext || !anyChecked;
        // Create or toggle an inline hint dynamically
        let msg = active.querySelector('.require-msg');
        if(!msg){
          const fs = active.querySelector('fieldset');
          if(fs){
            msg = document.createElement('p');
            msg.className = 'hint require-msg';
            msg.setAttribute('aria-live','polite');
            fs.appendChild(msg);
          }
        }
        if(msg){ msg.textContent = anyChecked ? '' : 'Select at least one option to continue.'; }
      }

      nextBtn.disabled = disableNext;
      nextBtn.textContent = idx===total-1 ? 'See results ▶' : 'Next ▶';
    }

    function onChange(){ updateUI(); }
    wizard.addEventListener('change', onChange);
    wizard.addEventListener('input', onChange);

    backBtn.addEventListener('click', ()=>{ if(idx>0){ idx--; updateUI(); }});
    nextBtn.addEventListener('click', ()=>{
      if(idx < total-1){ idx++; updateUI(); }
      else { computeResults(); }
    });

    // Initialize UI
    updateUI();

    // ---------- Compute results ----------
    function computeResults(){
      const fd = new FormData(document.createElement('form'));
      // Collect across steps
      $all('input').forEach(el=>{
        if((el.type==='radio'||el.type==='checkbox') && !el.checked) return;
        if(el.name) fd.append(el.name, el.value);
      });

      const age = fd.get('age');
      const exp = parseInt(fd.get('experience')||'3',10);
      const comfort = parseInt(fd.get('comfort')||'3',10);
      const interests = fd.getAll('interests');
      const style = fd.get('gameStyle');
      const learn = fd.get('learn');
      const hopes = fd.getAll('hopes');
      const structure = fd.get('structure');

      let jr=0, create=0, academy=0;
      if(age==='5-7'){ jr+=5 } else { create+=4 }
      if(age==='11-14' || age==='15+') academy += (exp>=4?2:1);
      create += (exp>=3?1:0) + (comfort>=3?1:0);
      academy += (exp>=4?2:0) + (comfort>=4?1:0);
      if(learn==='Step-by-step'||learn==='Mentor') create++;
      if(learn==='Independent') academy++;
      if(structure==='Structured') create+=2; if(structure==='Clubs') jr++; if(structure==='Clubs') create--;
      if(interests.includes('GameDev')) create+=2;
      if(interests.includes('Roblox')) create++;
      if(interests.includes('Minecraft')) jr++;
      if(interests.includes('Robotics')) academy++;
      if(interests.includes('AI')) academy+=2;
      if(style==='Create'||style==='Puzzles') create++;
      if(style==='Explore') jr++;
      if(hopes.includes('LongTerm')) create++;
      if(hopes.includes('Academic')) academy++;

      const top = [{k:'JR',v:jr},{k:'CREATE',v:create},{k:'ACADEMY',v:academy}].sort((a,b)=>b.v-a.v)[0].k;

      let title='', blurb='', points=[];
      if(top==='JR'){
        title='Recommended: JR Program (Ages 5–7)';
        blurb='Play‑based, confidence‑building intro to coding and STEM.';
        points=[
          'Visual curriculum with no reading required',
          'Playful activities that build sequencing and problem‑solving',
          'Supportive dojo environment with Code Senseis®'
        ];
      } else if(top==='CREATE'){
        title='Recommended: CREATE Program (8+)';
        blurb='Your child sounds like a Creative Ninja — perfect for our CREATE Program, where they’ll build their own games, learn real coding, and level up from white to black belt!';
        points=[
          'Path from blocks (MakeCode) to JavaScript to C# / Unity',
          'Design, test, and refine projects with mentor support',
          'Earn belts by mastering increasingly complex skills'
        ];
      } else {
        title='Recommended: Academy Path (AI or Robotics)';
        blurb='For ambitious learners ready to dive deeper into advanced STEM topics.';
        points=[
          'Hands‑on projects in AI or Robotics',
          'Blend software, hardware, and design to solve problems',
          'Great alongside CREATE for accelerated growth'
        ];
      }

      $('#recTitle').textContent = title;
      // Personalized greeting removed on final screen per request
      $('#recBlurb').textContent = blurb;
      $('#recPoints').innerHTML = points.map(p=>`<li>${p}</li>`).join('');

      // --- Program‑specific stats ---
      const statsByProgram = {
        'JR': [
          { value: '5–7', label: 'Ages (JR)' },
          { value: 'Completely visual', label: 'No reading required' },
          { value: 'ScratchJr • codeSpark', label: 'Kid‑friendly platforms' },
          { value: 'Sequencing • Loops • Conditionals', label: 'Core concepts' }
        ],
        'CREATE': [
          { value: '8–14', label: 'Ages (CREATE)' },
          { value: 'White → Black', label: 'Belt path' },
          { value: 'MakeCode → JavaScript → C#', label: 'Language progression' },
          { value: 'Unity capstone', label: 'Original game at Black Belt' }
        ],
        'ACADEMY': [
          { value: 'AI • Robotics', label: 'Tracks' },
          { value: 'Aug 2025', label: 'Launched' },
          { value: 'Multi‑week', label: 'Module format' },
          { value: 'LEGO SPIKE • VEX GO • Ozobot', label: 'Real tools' }
        ]
      };
      const stats = $('#stats');
      stats.innerHTML = (statsByProgram[top]||[]).map(s=>`<div class="stat"><h3>${s.value}</h3><p>${s.label}</p></div>`).join('');

      // Show results
      $('#wizard').style.display='none';
      result.style.display='block';
      window.scrollTo({top:0,behavior:'smooth'});
    }

    // ---------- Retake & Print ----------
    $('#retake').addEventListener('click',()=>{
      // Clear selections
      $all('input[type=radio],input[type=checkbox]').forEach(i=>i.checked=false);
      $all('input[type=range][name=experience]').forEach(i=>i.value=3);
      $all('input[type=range][name=comfort]').forEach(i=>i.value=3);
      // Reset wizard
      $('#wizard').style.display='block';
      $('#result').style.display='none';
      idx=0; updateUI();
      window.scrollTo({top:0,behavior:'smooth'});
    });
    $('#print').addEventListener('click',()=>window.print());

    // ---------- Minimal self-tests (console) ----------
    try{
      console.assert(typeof getParentName==='function', 'getParentName missing');
      console.assert(typeof setParentFirst==='function' && typeof setParentLast==='function', 'setParentFirst/setParentLast missing');
      console.assert(steps.length>=8, 'Expected 8 steps (questions only)');
      // UI state tests
      console.assert(!document.getElementById('prestart').classList.contains('hidden'), 'Prestart should be visible on load');
      console.assert(document.getElementById('wizard').classList.contains('hidden'), 'Wizard should be hidden until Start quiz');
      console.log('[Quiz] Basic checks passed.');
    }catch(e){ console.warn('[Quiz] Self-test warning:', e); }
  })();
  </script>
</body>
</html>
